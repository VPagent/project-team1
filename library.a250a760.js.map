{"mappings":"oeACA,MAAMA,EAAUC,SAASC,cAAc,sBACjCC,EAAaF,SAASC,cAAc,eACpCE,EAAWH,SAASC,cAAc,aAExCF,EAAQK,iBAAiB,SAEzB,SAAoBC,GAChB,GAA6B,WAA1BA,EAAMC,OAAOC,SACZ,OAEJF,EAAMC,OAAOE,UAAUC,IAAI,gBACxBJ,EAAMC,OAAOE,UAAUE,SAAS,eAC/BP,EAASK,UAAUG,OAAO,gBAE3BN,EAAMC,OAAOE,UAAUE,SAAS,aAC/BR,EAAWM,UAAUG,OAAO,e,IChBpCC,EAAA,S,iBCKO,MAAMC,EAAqBb,SAASC,cAAc,yBACnDa,EAAmBd,SAASC,cAAc,sBAEzC,IAAIc,EAAU,UAErB,MAAMC,EAAaC,aAAaC,QAAQH,GAClCI,EAAcC,KAAKC,MAAML,GA4BxB,SAASM,EAAoBC,GAClCC,QAAQC,IAAIF,GACZ,MAAMG,EAASH,EACdI,KACC,EAACC,MACCA,EAAKC,KACHA,EAAIC,GACJA,EAAEC,YACFA,EAAWC,aACXA,EAAYC,aACZA,EAAYC,UACZA,MAGA,IAAIC,EAAiB,GAOrB,OALEA,EADEJ,EACe,kCAAoCA,EAGrD,qFAEK,sCAAsCD,yGAELK,oBACjCP,GAASC,6IAGiBA,GAAQD,8GAGvC,EAAAQ,EAAAC,iBAAgBH,IAAc,8EAG9BD,EAAeA,EAAaK,MAAM,EAAG,GAAK,iFAG5BN,GAAgB,yGAIZ,IAGPO,KAAK,IAGN1B,EAAmB2B,mBAAmB,YAAad,E,CAzEvEb,EAAmB4B,UAAY,GAC/BnB,EAAoBH,GAEpBL,EAAiBV,iBAAiB,SAClC,SAAqBsC,GACnB,GAA2B,WAAxBA,EAAIpC,OAAOC,SACV,OAEJ,GAAImC,EAAIpC,OAAOE,UAAUE,SAAS,cAAe,CAC/CK,EAAU,UACV,MAAM4B,EAAa1B,aAAaC,QAAQH,GAClC6B,EAAcxB,KAAKC,MAAMsB,GAC/B9B,EAAmB4B,UAAY,GAC9BnB,EAAoBsB,E,CAEvB,GAAIF,EAAIpC,OAAOE,UAAUE,SAAS,YAAa,CAC7CK,EAAU,QACTS,QAAQC,IAAIV,GACZ,MAAM8B,EAAa5B,aAAaC,QAAQH,GACnC+B,EAAc1B,KAAKC,MAAMwB,GAC/BhC,EAAmB4B,UAAY,GAC/BnB,EAAoBwB,E,2BCjCxB,IAAAC,EAAAnC,EAAA,SAEA,IAAIoC,EACJ,MAAMC,EAAWjD,SAASC,cAAc,yBAElCiD,EAAQlD,SAASC,cAAc,qBAC/BkD,EAAgBnD,SAASC,cAAc,2BACvCmD,EAAiBpD,SAASC,cAAc,0BACxCoD,EAAOrD,SAASC,cAAc,QACnBD,SAASC,cAAc,yBACxC,IAEIqD,EACAC,EACAC,EAJAC,EAAa,GACbC,EAAW,GA2Df,SAASC,IACLT,EAAM1C,UAAUC,IAAI,aACpB4C,EAAK7C,UAAUG,OAAO,W,CAI1B,SAASiD,EAAaC,GACAA,EAAQvD,OAAOE,UAAUE,SAAS,yBAElDiD,G,CAKN,SAASG,EAAqBzD,GAC1B,GAA6B,WAA1BA,EAAMC,OAAOC,SAAhB,CAIA,GAAGF,EAAMC,OAAOE,UAAUE,SAAS,gCAAgC,CAK/D,GAJGO,aAAaC,QAAQ,aACtBuC,EAAarC,KAAKC,MAAMJ,aAAaC,QAAQ,aAG5Cb,EAAMC,OAAOE,UAAUE,SAAS,SAAS,CAC1C,MAAMqD,EAAMN,EAAWO,WAAUC,GAAQA,EAAKnC,KAAO0B,EAAS1B,KAQ9D,OAPA2B,EAAWS,OAAOH,EAAK,GACvB9C,aAAakD,QAAQ,UAAW/C,KAAKgD,UAAUX,IAC/CH,EAAYe,YAAc,iBAC1Bf,EAAY9C,UAAUG,OAAO,SAC7BE,EAAmB4B,UAAU,GAC7BnB,EAAqBF,KAAKC,MAAMJ,aAAaC,QAAQ,kBACrDyC,G,CAGFF,EAAWa,KAAKd,GAChBvC,aAAakD,QAAQ,UAAW/C,KAAKgD,UAAUX,IAC/CH,EAAYe,YAAc,oBAC1Bf,EAAY9C,UAAUC,IAAI,Q,CAG9B,GAAGJ,EAAMC,OAAOE,UAAUE,SAAS,8BAA8B,CAK7D,GAJGO,aAAaC,QAAQ,WACtBwC,EAAWtC,KAAKC,MAAMJ,aAAaC,QAAQ,WAG1Cb,EAAMC,OAAOE,UAAUE,SAAS,SAAS,CAC1C,MAAMqD,EAAML,EAASM,WAAUC,GAAQA,EAAKnC,KAAO0B,EAAS1B,KAQ5D,OAPA4B,EAASQ,OAAOH,EAAK,GACrB9C,aAAakD,QAAQ,QAAS/C,KAAKgD,UAAUV,IAC7CH,EAAUc,YAAc,eACxBd,EAAU/C,UAAUG,OAAO,SAC3BE,EAAmB4B,UAAU,GAC7BnB,EAAqBF,KAAKC,MAAMJ,aAAaC,QAAQ,gBACrDyC,G,CAGFD,EAASY,KAAKd,GACdvC,aAAakD,QAAQ,QAAS/C,KAAKgD,UAAUV,IAC7CH,EAAUc,YAAc,kBACxBd,EAAU/C,UAAUC,IAAI,Q,CA5CxB,C,CAvERwC,EAAS7C,iBAAiB,SAE1B,SAAqBC,GAEjB,GADAmB,QAAQC,IAAI,IACRpB,EAAMC,OAAOiE,QAAQ,uBACrB,OAEJrB,EAAM1C,UAAUG,OAAO,aACvB0C,EAAK7C,UAAUC,IAAI,YACnBuC,EAAkBjC,EAClB,MAAOe,GAACA,GAAOzB,EAAMC,OAAOiE,QAAQ,uBAC9BC,EAAYpD,KAAKC,MAAMJ,aAAaC,QAAQ8B,IAElDQ,EAAWgB,EAASC,MAAKR,GAAQA,EAAKnC,GAAG4C,aAAe5C,IAExDsB,EAAeX,WAAW,EAAAM,EAAA4B,mBAAkBnB,GAE5CL,EAAc/C,iBAAiB,QAASuD,GACxC3D,SAASI,iBAAiB,QAASwD,GAGnCN,EAActD,SAASC,cAAc,iCACrCqD,EAAYe,YAAc,oBAC1Bf,EAAY9C,UAAUC,IAAI,SAE1B8C,EAAYvD,SAASC,cAAc,+BACnCsD,EAAUc,YAAc,kBACxBd,EAAU/C,UAAUC,IAAI,SAOnBQ,aAAaC,QAAQ,WAAW0D,SAASpB,EAAS1B,MACrDwB,EAAYe,YAAc,iBAC1Bf,EAAY9C,UAAUG,OAAO,UAE1BM,aAAaC,QAAQ,SAAS0D,SAASpB,EAAS1B,MACnDyB,EAAUc,YAAc,eACxBd,EAAU/C,UAAUG,OAAO,UAGRX,SAASC,cAAc,wBAC/BG,iBAAiB,QAAS0D,E","sources":["src/js/header/library-header.js","src/js/pagination/paginationLibrary.js","src/js/templates/renderMarkupLibrary.js","src/js/mainModal/libraryModal.js"],"sourcesContent":["\nconst btnList = document.querySelector(\".header-buttonlist\")\nconst watchedBtn = document.querySelector(\".js-watched\")\nconst queueBtn = document.querySelector(\".js-queue\")\n\nbtnList.addEventListener(\"click\", onBtnClick)\n\nfunction onBtnClick(event){\n    if(event.target.nodeName !== \"BUTTON\"){\n        return\n    }\n    event.target.classList.add(\"current--btn\")\n    if(event.target.classList.contains(\"js-watched\")){\n        queueBtn.classList.remove(\"current--btn\")\n    }\n    if(event.target.classList.contains(\"js-queue\")){\n        watchedBtn.classList.remove(\"current--btn\")\n    }\n}\nexport { onBtnClick }\n\n","export { onClickEvt };\nimport { pagination } from './pagination';\n\n// const paginationLibraryContainer = document.querySelector(\n//   '.page__list-library'\n// );\n\nfunction onClickEvt(event) {\n  const WATCHED_KEY = localStorage.getItem('Watched');\n  console.log(WATCHED_KEY);\n  if (event.target.nodeName !== 'A') {\n    return;\n  }\n  if (event.target.classList.contains('page__arrow--left')) {\n    getTrendData((globalCurrentPage -= 1)).then(data => {\n      localStorage.setItem(CURRENT_FILMS_KEY, JSON.stringify(data.results));\n      filmGallery.innerHTML = '';\n      filmGallery.insertAdjacentHTML('beforeend', renderMarkup(data));\n      hideSpinner();\n      pagination(data.page, data.total_pages);\n    });\n    return;\n  }\n  if (event.target.classList.contains('page__arrow--right')) {\n    if (valueFromInput) {\n      fetchMovieSearch(valueFromInput, (globalCurrentPage += 1)).then(data => {\n        localStorage.setItem(CURRENT_FILMS_KEY, JSON.stringify(data.results));\n        filmGallery.innerHTML = '';\n        filmGallery.insertAdjacentHTML('beforeend', renderMarkup(data));\n        hideSpinner();\n        pagination(data.page, data.total_pages);\n      });\n      return;\n    }\n    getTrendData((globalCurrentPage += 1)).then(data => {\n      localStorage.setItem(CURRENT_FILMS_KEY, JSON.stringify(data.results));\n      filmGallery.innerHTML = '';\n      filmGallery.insertAdjacentHTML('beforeend', renderMarkup(data));\n      hideSpinner();\n      pagination(data.page, data.total_pages);\n    });\n    return;\n  }\n  if (event.target.textContent === '...') {\n    return;\n  }\n  const page = event.target.textContent;\n\n  if (valueFromInput) {\n    fetchMovieSearch(valueFromInput, page).then(data => {\n      console.log(data);\n      localStorage.setItem(CURRENT_FILMS_KEY, JSON.stringify(data.results));\n      filmGallery.innerHTML = '';\n      filmGallery.insertAdjacentHTML('beforeend', renderMarkup(data));\n      hideSpinner();\n      pagination(data.page, data.total_pages);\n    });\n    return;\n  } else {\n    getTrendData(page).then(data => {\n      localStorage.setItem(CURRENT_FILMS_KEY, JSON.stringify(data.results));\n      filmGallery.innerHTML = '';\n      filmGallery.insertAdjacentHTML('beforeend', renderMarkup(data));\n      hideSpinner();\n      pagination(data.page, data.total_pages);\n    });\n    return;\n  }\n}\n","import { onClickEvt } from '../pagination/paginationLibrary';\nimport { matchGenresById } from '../findGenres/findGenres';\n// import { pagination } from '../pagination/pagination';\n\n\nexport const myLibraryContainer = document.querySelector('.film-myLibrary__list');\nconst headerButtonlist = document.querySelector('.header-buttonlist');\n\nexport let filmKey = 'Watched';\n\nconst savedFilms = localStorage.getItem(filmKey);\nconst parsedFilms = JSON.parse(savedFilms);\nmyLibraryContainer.innerHTML = '';\nrenderMarkupLibrary(parsedFilms)\n\nheaderButtonlist.addEventListener('click', getFilmsKey);\nfunction getFilmsKey(evt) {\n  if(evt.target.nodeName !== \"BUTTON\"){\n      return\n    }\n  if (evt.target.classList.contains('js-watched')) {\n    filmKey = 'Watched'\n    const savedFilms = localStorage.getItem(filmKey);\n    const parsedFilms = JSON.parse(savedFilms);\n    myLibraryContainer.innerHTML = '';\n     renderMarkupLibrary(parsedFilms)\n  }\n  if (evt.target.classList.contains('js-queue')) {\n    filmKey = 'Queue'\n     console.log(filmKey);\n     const savedFilms = localStorage.getItem(filmKey);\n    const parsedFilms = JSON.parse(savedFilms);\n    myLibraryContainer.innerHTML = '';\n    renderMarkupLibrary(parsedFilms);\n  }\n}\n\n// console.log(parsedFilms); // settings object\n\nexport function renderMarkupLibrary(parsedFilms) {\n  console.log(parsedFilms);\n  const markup = parsedFilms\n  .map(\n    ({\n      title,\n        name,\n        id,\n        poster_path,\n        vote_average,\n        release_date,\n        genre_ids,\n        \n      }) => {\n        let POSTER_IMG_URL = '';\n        if (poster_path) {\n          POSTER_IMG_URL = 'https://image.tmdb.org/t/p/w500' + poster_path;\n        } else {\n          POSTER_IMG_URL =\n          'https://img.freepik.com/free-vector/glitch-error-404-page_23-2148105404.jpg?w=1000';\n        }\n        return `<li class=\"film-gallery__item\" id=\"${id}\">\n        <div class=\"film-gallery__image-wrapper\">\n        <img class=\"film-gallery__image\" src=\"${POSTER_IMG_URL}\"\n        alt=\"${title || name}\" width =\"394\" height =\"336\"/>\n        </div>\n        <div class=\"film-gallery__info-wrapper\">\n        <h3 class=\"film-gallery__name\">${name || title}</h3>\n        <p class=\"film-gallery__info\">\n        <span class=\"film-gallery__info-genres\">\n        ${matchGenresById(genre_ids) || 'No info'}</span>\n        |\n        <span class=\"film-gallery__info-year\">${\n          release_date ? release_date.slice(0, 4) : 'No info'\n                      }</span>\n                      <span class=\"film-gallery__info-rang\">${\n                        vote_average || 'No info'\n                      }</span>\n                      </p>\n                      </div>\n                      </li>`;\n                    }\n                    )\n                    .join('');\n                    // pagination(data.page, data.total_pages);\n                    // return markup;\n                    myLibraryContainer.insertAdjacentHTML('beforeend', markup);\n                  }\n\n\n\n","import { renderMarkupModal } from \"./renderMarkupModal\"\nimport { filmKey, renderMarkupLibrary, myLibraryContainer } from \"../templates/renderMarkupLibrary\"\nlet CURRENT_STORAGE\nconst filmList = document.querySelector(\".film-myLibrary__list\")\n\nconst modal = document.querySelector('[data-main-modal]');\nconst closeModalBtn = document.querySelector('[data-modal-main-close]');\nconst modalContainer = document.querySelector('.main-modal__container');\nconst body = document.querySelector('body');\nconst backdrop = document.querySelector('.main-modal__backdrop');\nlet watchedObj = []\nlet queueObj = []\nlet watchedBtnL\nlet queueBtnL\nlet currFilm\nfilmList.addEventListener(\"click\", onFilmClick)\n\nfunction onFilmClick(event){\n    console.log(1)\n    if(!event.target.closest(\".film-gallery__item\")){\n        return\n    }\n    modal.classList.remove('is-hidden');\n    body.classList.add('overflow');\n    CURRENT_STORAGE = filmKey\n    const  {id}  = event.target.closest(\".film-gallery__item\")\n    const allFilms  = JSON.parse(localStorage.getItem(CURRENT_STORAGE))\n\n    currFilm = allFilms.find(elem => elem.id.toString() === id)\n    \n    modalContainer.innerHTML= renderMarkupModal(currFilm)\n\n    closeModalBtn.addEventListener('click', closeToggleModal);\n    document.addEventListener('click', clickOverlay);\n    // let watchedObj = []\n    // let queueObj = []\n    watchedBtnL = document.querySelector(\".main-modal__buttons--watched\")\n    watchedBtnL.textContent = \"Remove in watched\"\n    watchedBtnL.classList.add(\"added\")\n\n    queueBtnL = document.querySelector(\".main-modal__buttons--queue\")\n    queueBtnL.textContent = \"Remove in queue\"\n    queueBtnL.classList.add(\"added\")\n    // if(CURRENT_STORAGE === \"Watched\"){\n    //   queueBtnL.setAttribute(\"disabled\")\n    // }\n    // if(CURRENT_STORAGE === \"Queue\"){\n    //   watchedBtnL.setAttribute(\"disabled\")\n    // }\n    if (!localStorage.getItem('Watched').includes(currFilm.id)) {\n      watchedBtnL.textContent = 'Add to watched';\n      watchedBtnL.classList.remove('added');\n    }\n    if (!localStorage.getItem('Queue').includes(currFilm.id)) {\n      queueBtnL.textContent = 'Add to queue';\n      queueBtnL.classList.remove('added');\n    }\n\n    const modalBtnList = document.querySelector(\".main-modal__buttons\")\n    modalBtnList.addEventListener(\"click\", onBtnClickInModalLib)\n\n}\n\n\nfunction esc(key) {\n    if (key.code === 'Escape') {\n      closeToggleModal();\n    }\n}\n  \nfunction closeToggleModal() {\n    modal.classList.add('is-hidden');\n    body.classList.remove('overflow');\n    // modalContainer.innerHTML = '';\n}\n  \nfunction clickOverlay(overLay) {\n    const isContain = overLay.target.classList.contains('main-modal__backdrop');\n    if (isContain) {\n      closeToggleModal();\n    }\n}\n\n\nfunction onBtnClickInModalLib(event){\n    if(event.target.nodeName !== \"BUTTON\"){\n        return\n    }\n\n    if(event.target.classList.contains(\"main-modal__buttons--watched\")){\n        if(localStorage.getItem(\"Watched\")){\n          watchedObj = JSON.parse(localStorage.getItem(\"Watched\"))\n        }\n  \n        if(event.target.classList.contains(\"added\")){\n          const idx = watchedObj.findIndex(elem => elem.id === currFilm.id)\n          watchedObj.splice(idx, 1)\n          localStorage.setItem(\"Watched\", JSON.stringify(watchedObj))\n          watchedBtnL.textContent = \"Add to watched\"\n          watchedBtnL.classList.remove(\"added\")\n          myLibraryContainer.innerHTML=\"\"\n          renderMarkupLibrary( JSON.parse(localStorage.getItem(\"Watched\")))\n          closeToggleModal()\n          return\n        }\n        watchedObj.push(currFilm)\n        localStorage.setItem(\"Watched\", JSON.stringify(watchedObj))\n        watchedBtnL.textContent = \"Remove in watched\"\n        watchedBtnL.classList.add(\"added\")\n    }\n\n    if(event.target.classList.contains(\"main-modal__buttons--queue\")){\n        if(localStorage.getItem(\"Queue\")){\n          queueObj = JSON.parse(localStorage.getItem(\"Queue\"))\n        }\n\n        if(event.target.classList.contains(\"added\")){\n          const idx = queueObj.findIndex(elem => elem.id === currFilm.id)\n          queueObj.splice(idx, 1)\n          localStorage.setItem(\"Queue\", JSON.stringify(queueObj))\n          queueBtnL.textContent = \"Add to queue\"\n          queueBtnL.classList.remove(\"added\")\n          myLibraryContainer.innerHTML=\"\"\n          renderMarkupLibrary( JSON.parse(localStorage.getItem(\"Queue\")))\n          closeToggleModal()\n          return\n        }\n        queueObj.push(currFilm)\n        localStorage.setItem(\"Queue\", JSON.stringify(queueObj))\n        queueBtnL.textContent = \"Remove in queue\"\n        queueBtnL.classList.add(\"added\")\n    }\n}"],"names":["$b8ed2cd6ee346955$var$btnList","document","querySelector","$b8ed2cd6ee346955$var$watchedBtn","$b8ed2cd6ee346955$var$queueBtn","addEventListener","event","target","nodeName","classList","add","contains","remove","parcelRequire","$1c2bc57ba0796c30$export$1daefcb9b7d48ae","$1c2bc57ba0796c30$var$headerButtonlist","$1c2bc57ba0796c30$export$63c86cadbd015884","$1c2bc57ba0796c30$var$savedFilms","localStorage","getItem","$1c2bc57ba0796c30$var$parsedFilms","JSON","parse","$1c2bc57ba0796c30$export$ebd406d59fee41e7","parsedFilms3","console","log","markup","map","title","name","id","poster_path","vote_average","release_date","genre_ids","POSTER_IMG_URL","$fQFWi","matchGenresById","slice","join","insertAdjacentHTML","innerHTML","evt","savedFilms1","parsedFilms1","savedFilms2","parsedFilms2","$6yjRA","$1cec5b76e76dc2a8$var$CURRENT_STORAGE","$1cec5b76e76dc2a8$var$filmList","$1cec5b76e76dc2a8$var$modal","$1cec5b76e76dc2a8$var$closeModalBtn","$1cec5b76e76dc2a8$var$modalContainer","$1cec5b76e76dc2a8$var$body","$1cec5b76e76dc2a8$var$watchedBtnL","$1cec5b76e76dc2a8$var$queueBtnL","$1cec5b76e76dc2a8$var$currFilm","$1cec5b76e76dc2a8$var$watchedObj","$1cec5b76e76dc2a8$var$queueObj","$1cec5b76e76dc2a8$var$closeToggleModal","$1cec5b76e76dc2a8$var$clickOverlay","overLay","$1cec5b76e76dc2a8$var$onBtnClickInModalLib","idx","findIndex","elem","splice","setItem","stringify","textContent","push","closest","allFilms","find","toString","renderMarkupModal","includes"],"version":3,"file":"library.a250a760.js.map"}