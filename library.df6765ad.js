!function(){var e="undefined"!=typeof globalThis?globalThis:"undefined"!=typeof self?self:"undefined"!=typeof window?window:"undefined"!=typeof global?global:{},t={},a={},n=e.parcelRequired7c6;null==n&&((n=function(e){if(e in t)return t[e].exports;if(e in a){var n=a[e];delete a[e];var o={id:e,exports:{}};return t[e]=o,n.call(o.exports,o,o.exports),o.exports}var r=new Error("Cannot find module '"+e+"'");throw r.code="MODULE_NOT_FOUND",r}).register=function(e,t){a[e]=t},e.parcelRequired7c6=n);var o=document.querySelector(".header-buttonlist"),r=document.querySelector(".js-watched"),i=document.querySelector(".js-queue");o.addEventListener("click",(function(e){if("BUTTON"!==e.target.nodeName)return;e.target.classList.add("current--btn"),e.target.classList.contains("js-watched")&&i.classList.remove("current--btn");e.target.classList.contains("js-queue")&&r.classList.remove("current--btn")}));n("bOuzt");var c=n("5m7Gj"),s=document.querySelector(".film-myLibrary__list"),d=document.querySelector(".header-buttonlist"),l="Watched",u=localStorage.getItem(l),m=JSON.parse(u);function g(e){console.log(e);var t=e.map((function(e){var t=e.title,a=e.name,n=e.id,o=e.poster_path,r=e.vote_average,i=e.release_date,s=e.genre_ids,d="";return d=o?"https://image.tmdb.org/t/p/w500"+o:"https://img.freepik.com/free-vector/glitch-error-404-page_23-2148105404.jpg?w=1000",'<li class="film-gallery__item" id="'.concat(n,'">\n        <div class="film-gallery__image-wrapper">\n        <img class="film-gallery__image" src="').concat(d,'"\n        alt="').concat(t||a,'" width ="394" height ="336"/>\n        </div>\n        <div class="film-gallery__info-wrapper">\n        <h3 class="film-gallery__name">').concat(a||t,'</h3>\n        <p class="film-gallery__info">\n        <span class="film-gallery__info-genres">\n        ').concat((0,c.matchGenresById)(s)||"No info",'</span>\n        |\n        <span class="film-gallery__info-year">').concat(i?i.slice(0,4):"No info",'</span>\n                      <span class="film-gallery__info-rang">').concat(r||"No info","</span>\n                      </p>\n                      </div>\n                      </li>")})).join("");s.insertAdjacentHTML("beforeend",t)}s.innerHTML="",g(m),d.addEventListener("click",(function(e){if("BUTTON"!==e.target.nodeName)return;if(e.target.classList.contains("js-watched")){l="Watched";var t=localStorage.getItem(l),a=JSON.parse(t);s.innerHTML="",g(a)}if(e.target.classList.contains("js-queue")){l="Queue",console.log(l);var n=localStorage.getItem(l),o=JSON.parse(n);s.innerHTML="",g(o)}})),n("ckBNW"),n("iNwH7");var f,_,p,v,S=n("9zkr1"),h=document.querySelector(".film-myLibrary__list"),y=document.querySelector("[data-main-modal]"),L=document.querySelector("[data-modal-main-close]"),b=document.querySelector(".main-modal__container"),q=document.querySelector("body");document.querySelector(".main-modal__backdrop");function O(){y.classList.add("is-hidden"),q.classList.remove("overflow")}function w(e){e.target.classList.contains("main-modal__backdrop")&&O()}function N(e){if("BUTTON"===e.target.nodeName){if(e.target.classList.contains("main-modal__buttons--watched")){if(localStorage.getItem("Watched")&&(watchedObj=JSON.parse(localStorage.getItem("Watched"))),e.target.classList.contains("added")){var t=watchedObj.findIndex((function(e){return e.id===v.id}));return watchedObj.splice(t,1),localStorage.setItem("Watched",JSON.stringify(watchedObj)),_.textContent="Add to watched",_.classList.remove("added"),s.innerHTML="",g(JSON.parse(localStorage.getItem("Watched"))),void O()}watchedObj.push(v),localStorage.setItem("Watched",JSON.stringify(watchedObj)),_.textContent="Remove in watched",_.classList.add("added")}if(e.target.classList.contains("main-modal__buttons--queue")){if(localStorage.getItem("Queue")&&(queueObj=JSON.parse(localStorage.getItem("Queue"))),e.target.classList.contains("added")){var a=queueObj.findIndex((function(e){return e.id===v.id}));return queueObj.splice(a,1),localStorage.setItem("Queue",JSON.stringify(queueObj)),p.textContent="Add to queue",p.classList.remove("added"),s.innerHTML="",g(JSON.parse(localStorage.getItem("Queue"))),void O()}queueObj.push(v),localStorage.setItem("Queue",JSON.stringify(queueObj)),p.textContent="Remove in queue",p.classList.add("added")}}}h.addEventListener("click",(function(e){if(console.log(1),!e.target.closest(".film-gallery__item"))return;y.classList.remove("is-hidden"),q.classList.add("overflow"),f=l;var t=e.target.closest(".film-gallery__item").id,a=JSON.parse(localStorage.getItem(f));v=a.find((function(e){return e.id.toString()===t})),b.innerHTML=(0,S.renderMarkupModal)(v),L.addEventListener("click",O),document.addEventListener("click",w);(_=document.querySelector(".main-modal__buttons--watched")).textContent="Remove in watched",_.classList.add("added"),(p=document.querySelector(".main-modal__buttons--queue")).textContent="Remove in queue",p.classList.add("added"),localStorage.getItem("Watched").includes(v.id)||(_.textContent="Add to watched",_.classList.remove("added"));localStorage.getItem("Queue").includes(v.id)||(p.textContent="Add to queue",p.classList.remove("added"));document.querySelector(".main-modal__buttons").addEventListener("click",N)}))}();
//# sourceMappingURL=library.df6765ad.js.map
