var e="undefined"!=typeof globalThis?globalThis:"undefined"!=typeof self?self:"undefined"!=typeof window?window:"undefined"!=typeof global?global:{},t={},a={},n=e.parcelRequired7c6;null==n&&((n=function(e){if(e in t)return t[e].exports;if(e in a){var n=a[e];delete a[e];var o={id:e,exports:{}};return t[e]=o,n.call(o.exports,o,o.exports),o.exports}var s=new Error("Cannot find module '"+e+"'");throw s.code="MODULE_NOT_FOUND",s}).register=function(e,t){a[e]=t},e.parcelRequired7c6=n);const o=document.querySelector(".header-buttonlist"),s=document.querySelector(".js-watched"),i=document.querySelector(".js-queue");o.addEventListener("click",(function(e){if("BUTTON"!==e.target.nodeName)return;e.target.classList.add("current--btn"),e.target.classList.contains("js-watched")&&i.classList.remove("current--btn");e.target.classList.contains("js-queue")&&s.classList.remove("current--btn")}));n("8huCE");var r=n("fQFWi");const l=document.querySelector(".film-myLibrary__list"),d=document.querySelector(".header-buttonlist");let c="Watched";const u=localStorage.getItem(c),m=JSON.parse(u);function g(e){console.log(e);const t=e.map((({title:e,name:t,id:a,poster_path:n,vote_average:o,release_date:s,genre_ids:i})=>{let l="";return l=n?"https://image.tmdb.org/t/p/w500"+n:"https://img.freepik.com/free-vector/glitch-error-404-page_23-2148105404.jpg?w=1000",`<li class="film-gallery__item" id="${a}">\n        <div class="film-gallery__image-wrapper">\n        <img class="film-gallery__image" src="${l}"\n        alt="${e||t}" width ="394" height ="336"/>\n        </div>\n        <div class="film-gallery__info-wrapper">\n        <h3 class="film-gallery__name">${t||e}</h3>\n        <p class="film-gallery__info">\n        <span class="film-gallery__info-genres">\n        ${(0,r.matchGenresById)(i)||"No info"}</span>\n        |\n        <span class="film-gallery__info-year">${s?s.slice(0,4):"No info"}</span>\n                      <span class="film-gallery__info-rang">${o||"No info"}</span>\n                      </p>\n                      </div>\n                      </li>`})).join("");l.insertAdjacentHTML("beforeend",t)}l.innerHTML="",g(m),d.addEventListener("click",(function(e){if("BUTTON"!==e.target.nodeName)return;if(e.target.classList.contains("js-watched")){c="Watched";const e=localStorage.getItem(c),t=JSON.parse(e);l.innerHTML="",g(t)}if(e.target.classList.contains("js-queue")){c="Queue",console.log(c);const e=localStorage.getItem(c),t=JSON.parse(e);l.innerHTML="",g(t)}})),n("cOgen"),n("lqUOw");var f=n("6yjRA");let _;const p=document.querySelector(".film-myLibrary__list"),h=document.querySelector("[data-main-modal]"),S=document.querySelector("[data-modal-main-close]"),y=document.querySelector(".main-modal__container"),L=document.querySelector("body");document.querySelector(".main-modal__backdrop");let v,b,q;function O(){h.classList.add("is-hidden"),L.classList.remove("overflow")}function w(e){e.target.classList.contains("main-modal__backdrop")&&O()}function N(e){if("BUTTON"===e.target.nodeName){if(e.target.classList.contains("main-modal__buttons--watched")){if(localStorage.getItem("Watched")&&(watchedObj=JSON.parse(localStorage.getItem("Watched"))),e.target.classList.contains("added")){const e=watchedObj.findIndex((e=>e.id===q.id));return watchedObj.splice(e,1),localStorage.setItem("Watched",JSON.stringify(watchedObj)),v.textContent="Add to watched",v.classList.remove("added"),l.innerHTML="",g(JSON.parse(localStorage.getItem("Watched"))),void O()}watchedObj.push(q),localStorage.setItem("Watched",JSON.stringify(watchedObj)),v.textContent="Remove in watched",v.classList.add("added")}if(e.target.classList.contains("main-modal__buttons--queue")){if(localStorage.getItem("Queue")&&(queueObj=JSON.parse(localStorage.getItem("Queue"))),e.target.classList.contains("added")){const e=queueObj.findIndex((e=>e.id===q.id));return queueObj.splice(e,1),localStorage.setItem("Queue",JSON.stringify(queueObj)),b.textContent="Add to queue",b.classList.remove("added"),l.innerHTML="",g(JSON.parse(localStorage.getItem("Queue"))),void O()}queueObj.push(q),localStorage.setItem("Queue",JSON.stringify(queueObj)),b.textContent="Remove in queue",b.classList.add("added")}}}p.addEventListener("click",(function(e){if(console.log(1),!e.target.closest(".film-gallery__item"))return;h.classList.remove("is-hidden"),L.classList.add("overflow"),_=c;const{id:t}=e.target.closest(".film-gallery__item"),a=JSON.parse(localStorage.getItem(_));q=a.find((e=>e.id.toString()===t)),y.innerHTML=(0,f.renderMarkupModal)(q),S.addEventListener("click",O),document.addEventListener("click",w);v=document.querySelector(".main-modal__buttons--watched"),v.textContent="Remove in watched",v.classList.add("added"),b=document.querySelector(".main-modal__buttons--queue"),b.textContent="Remove in queue",b.classList.add("added"),localStorage.getItem("Watched").includes(q.id)||(v.textContent="Add to watched",v.classList.remove("added"));localStorage.getItem("Queue").includes(q.id)||(b.textContent="Add to queue",b.classList.remove("added"));document.querySelector(".main-modal__buttons").addEventListener("click",N)}));
//# sourceMappingURL=library.790d2ba6.js.map
